<div class="container">
  <h1>Registration Form</h1>
  
  <div *ngIf="hasError" class="alert alert-danger">
    <h4 class="alert-heading text-center">{{serverResponse}}</h4>
  </div>
  <form [formGroup]="registerForm" (submit)="onRegister()">
    <div class="form-group">
      <label for="username">Username</label>
      <input type="text" class="form-control" id="username" formControlName="username" required>
      <div *ngIf="username.touched && username.errors" class="alert alert-danger">
        <div *ngIf="username.errors.required">
          Username is required.
        </div>
        <div *ngIf="!username.errors.required">
          <div *ngIf="username.errors.startsWithCapital === false">
            Username should start with capital letter.
          </div>
          <div *ngIf="username.errors.hasOnlyAlphanumerics === false">
            Username should contain only letters and digits.
          </div>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" class="form-control" id="password" formControlName="password" required>
      <span class="label label-success"> Symbols:
        <span class="badge badge-secondary">{{password.value.length}}</span>
      </span>
      <div *ngIf="password.touched && password.errors" class="alert alert-danger">
        <div *ngIf="password.errors.required">
          Password is required.
        </div>
        <div *ngIf="!password.errors.required">
          <div *ngIf="password.errors.hasOnlyAlphanumerics === false">
            Password should contain only letters and digits.
          </div>
          <div *ngIf="password.errors.wrongLength">
            Password should be between 4 and 16 characters long.
          </div>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="confirmPassword">Confirm Password</label>
      <input type="password" class="form-control" id="confirmPassword" formControlName="confirmPass">
      <div *ngIf="confirmPass.touched">
        <div *ngIf="confirmPass.errors && confirmPass.errors.required" class="alert alert-danger">
          Confirm password is required.
        </div>
        <div *ngIf="!confirmPass.errors && password.value !== confirmPass.value" class="alert alert-danger">
          The values in 'Password' and 'Confirm Password' fields should match.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="firstName">First Name</label>
      <input type="text" class="form-control" id="firstName" formControlName="firstName" required>
      <div *ngIf="firstName.touched && firstName.errors" class="alert alert-danger">
        <div *ngIf="firstName.errors.required">
          `First Name` is required.
        </div>
        <div *ngIf="!firstName.errors.required && firstName.errors.startsWithCapital === false">
          `First Name` should start with a capital letter.
        </div>
        <div *ngIf="!firstName.errors.required && firstName.errors.containsOnlyLetters === false">
          `First Name` should contain only letters.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="lastName">Last Name</label>
      <input type="text" class="form-control" id="lastName" formControlName="lastName" required>
      <div *ngIf="lastName.touched && lastName.errors" class="alert alert-danger">
        <div *ngIf="lastName.errors.required">
          `Last Name` is required.
        </div>
        <div *ngIf="!lastName.errors.required && lastName.errors.startsWithCapital === false">
          `Last Name` should start with a capital letter.
        </div>
        <div *ngIf="!lastName.errors.required && lastName.errors.containsOnlyLetters === false">
          `Last Name` should contain only letters.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="email">Email Address</label>
      <input type="text" class="form-control" id="email" formControlName="email" required>
      <div *ngIf="email.touched && email.errors" class="alert alert-danger">
        <div *ngIf="email.errors.required">
          `Email` is required.
        </div>
        <div *ngIf="!email.errors.required && email.errors.emailValidated === false">
          `Email` is not in valid format.
        </div>
      </div>
    </div>
    <div class="form-group">
      <label for="age">Age</label>
      <input type="text" class="form-control" id="age" formControlName="age">
      <div *ngIf="age.touched && age.errors" class="alert alert-danger">
        <div *ngIf="age.errors.isValid === false">
          `Age` should be a whole number in range 0-150.
        </div>
      </div>
    </div>

    <button type="submit" class="btn btn-success" [disabled]="registerForm.invalid">Register</button>
  </form>
</div>